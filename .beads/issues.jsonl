{"id":"voice-memory-0k0","title":"Add V2 analysis prompt to lib/analysis.ts","description":"Add V2 prompt alongside V1 with version parameter. Keep both prompts, default new notes to V2. ~50 LOC.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T21:59:27.071141-08:00","created_by":"andykaufman","updated_at":"2026-01-04T22:24:30.642193-08:00","closed_at":"2026-01-04T22:24:30.642193-08:00","close_reason":"Implemented by parallel subagents","dependencies":[{"issue_id":"voice-memory-0k0","depends_on_id":"voice-memory-u9p","type":"blocks","created_at":"2026-01-04T22:00:26.387592-08:00","created_by":"andykaufman"}]}
{"id":"voice-memory-17j","title":"[P1-DATA] reorder_pinned_tasks RPC uses SECURITY DEFINER without proper user validation","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-01T11:30:23.283428-08:00","updated_at":"2026-01-01T15:39:18.41531-08:00","closed_at":"2026-01-01T15:39:18.41531-08:00","close_reason":"Created migration 20260101_fix_rpc_security_definer.sql adding auth.uid() validation to reorder_pins, get_next_pin_order, get_pinned_task_ids"}
{"id":"voice-memory-2na","title":"[P2-DATA] getOrCreateTaskState not atomic - race condition on concurrent task creation","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-01T11:30:38.809326-08:00","updated_at":"2026-01-01T16:00:53.015016-08:00","closed_at":"2026-01-01T16:00:53.015016-08:00","close_reason":"Fixed race condition using optimistic INSERT with conflict handling. If INSERT fails with unique_violation (23505), fetches and returns the existing row. This prevents duplicate row creation when concurrent requests try to create the same task state."}
{"id":"voice-memory-3le","title":"Fix PollingManager subscription table (task_pins → task_states)","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-01T11:56:14.597245-08:00","updated_at":"2026-01-01T12:14:54.297288-08:00","closed_at":"2026-01-01T12:14:54.297288-08:00"}
{"id":"voice-memory-47d","title":"Update AnalysisView for V2 fields","description":"Update app/components/AnalysisView.tsx to show theOneThing.why prominently and noteType badge. TheOneThing is styled section, not separate component. ~30 LOC.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T21:59:49.449965-08:00","created_by":"andykaufman","updated_at":"2026-01-04T22:24:30.64727-08:00","closed_at":"2026-01-04T22:24:30.64727-08:00","close_reason":"Implemented by parallel subagents","dependencies":[{"issue_id":"voice-memory-47d","depends_on_id":"voice-memory-u9p","type":"blocks","created_at":"2026-01-04T22:00:47.377872-08:00","created_by":"andykaufman"}]}
{"id":"voice-memory-6o6","title":"Create open_loops database migration","description":"Create supabase/migrations/YYYYMMDD_open_loops.sql with single table for tracking decisions and waiting-for items. ~15 LOC. See plan for schema.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T21:59:21.804056-08:00","created_by":"andykaufman","updated_at":"2026-01-04T22:16:42.339483-08:00","closed_at":"2026-01-04T22:16:42.339483-08:00","close_reason":"Both tasks completed: migration file created at supabase/migrations/20260104_open_loops.sql and types extended in lib/types.ts with V2 ADHD fields"}
{"id":"voice-memory-715","title":"Delete orphaned task_states records","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-01T11:56:14.620787-08:00","updated_at":"2026-01-01T12:11:38.501891-08:00","closed_at":"2026-01-01T12:11:38.501891-08:00"}
{"id":"voice-memory-7x6","title":"[P0-DATA] Type system fragmentation - 3 different NoteAnalysis definitions cause silent failures","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-01T11:30:06.937357-08:00","updated_at":"2026-01-01T12:06:07.286683-08:00","closed_at":"2026-01-01T12:06:07.286683-08:00"}
{"id":"voice-memory-9w6","title":"Fix RealtimeManager subscription table (task_pins → task_states)","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-01T11:56:14.571547-08:00","updated_at":"2026-01-01T12:30:44.683342-08:00","closed_at":"2026-01-01T12:30:44.683342-08:00"}
{"id":"voice-memory-9yw","title":"[P0-PERF] 22+ SELECT * queries causing 40-60% unnecessary data transfer","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-01T11:30:07.887956-08:00","updated_at":"2026-01-01T12:23:05.104108-08:00","closed_at":"2026-01-01T12:23:05.104108-08:00"}
{"id":"voice-memory-atq","title":"[P2-PERF] Polling every 5s without backoff - 12 requests/min/user","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T11:30:38.374775-08:00","updated_at":"2026-01-01T17:20:13.610161-08:00","closed_at":"2026-01-01T17:20:13.610161-08:00","close_reason":"Implemented IntersectionObserver-based virtualization and adaptive exponential backoff"}
{"id":"voice-memory-b31","title":"Align validation.ts with types.ts (use z.ZodType\u003cNoteAnalysis\u003e)","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-01T11:56:14.648238-08:00","updated_at":"2026-01-01T12:06:07.291032-08:00","closed_at":"2026-01-01T12:06:07.291032-08:00"}
{"id":"voice-memory-bnk","title":"[P1-ARCH] PollingManager also subscribes to wrong table (task_pins)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-01T11:30:24.221687-08:00","updated_at":"2026-01-01T12:14:54.302083-08:00","closed_at":"2026-01-01T12:14:54.302083-08:00"}
{"id":"voice-memory-bv6","title":"[P2-ARCH] Phase ordering wrong - 1.4 data integrity should precede 1.3 auth consolidation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T11:30:37.876505-08:00","updated_at":"2026-01-01T11:56:21.58374-08:00","closed_at":"2026-01-01T11:56:21.58374-08:00"}
{"id":"voice-memory-d1v","title":"[P0-SEC] Shortcut upload endpoint bypasses all security (no rate limit, no file validation)","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-01T11:30:06.484603-08:00","updated_at":"2026-01-01T12:01:12.90377-08:00","closed_at":"2026-01-01T12:01:12.90377-08:00"}
{"id":"voice-memory-des","title":"[P0-SEC] Debug endpoint /api/debug-client-env has NO production guard","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-01T11:30:06.028303-08:00","updated_at":"2026-01-01T11:59:11.310972-08:00","closed_at":"2026-01-01T11:59:11.310972-08:00"}
{"id":"voice-memory-dok","title":"Store open loops in AnalysisProcessorService","description":"Update lib/processing/AnalysisProcessorService.ts to extract openLoops from analysis and store in open_loops table. Inline logic, no separate service. ~20 LOC.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T21:59:43.885137-08:00","created_by":"andykaufman","updated_at":"2026-01-04T21:59:43.885137-08:00","dependencies":[{"issue_id":"voice-memory-dok","depends_on_id":"voice-memory-6o6","type":"blocks","created_at":"2026-01-04T22:00:31.644599-08:00","created_by":"andykaufman"},{"issue_id":"voice-memory-dok","depends_on_id":"voice-memory-ush","type":"blocks","created_at":"2026-01-04T22:00:36.880264-08:00","created_by":"andykaufman"},{"issue_id":"voice-memory-dok","depends_on_id":"voice-memory-0k0","type":"blocks","created_at":"2026-01-04T22:00:42.124864-08:00","created_by":"andykaufman"}]}
{"id":"voice-memory-fk4","title":"Fix Vercel 413: Implement signed URL upload","description":"Vercel has hard body size limits (4.5MB Hobby, 5MB Pro) causing 413 errors for large audio files. Solution: Implement two-step upload - get signed URL, upload directly to Supabase Storage, then create note via metadata endpoint. See plan: ~/.claude/plans/logical-meandering-lamport.md","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-01T21:40:13.10873-08:00","created_by":"andykaufman","updated_at":"2026-01-01T21:51:36.060474-08:00","closed_at":"2026-01-01T21:51:36.060474-08:00","close_reason":"Implemented signed URL upload flow - tested with 6.8MB file successfully"}
{"id":"voice-memory-loe","title":"Create OpenLoopsList component","description":"Create app/components/OpenLoopsList.tsx - simple list showing open decisions and waiting-for items with resolve checkbox. Query open_loops table where resolved=false. ~60 LOC.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-04T22:00:00.727358-08:00","created_by":"andykaufman","updated_at":"2026-01-04T22:00:00.727358-08:00","dependencies":[{"issue_id":"voice-memory-loe","depends_on_id":"voice-memory-dok","type":"blocks","created_at":"2026-01-04T22:00:57.856792-08:00","created_by":"andykaufman"}]}
{"id":"voice-memory-m63","title":"feat: V2 ADHD-Optimized Analysis Prompt","description":"Epic: Upgrade Voice Memory analysis with ADHD-optimized features including theOneThing.why, time/energy estimates on tasks, and open loops tracking. See plans/feat-v2-adhd-analysis-prompt.md","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-04T21:58:59.396812-08:00","created_by":"andykaufman","updated_at":"2026-01-04T22:25:20.655863-08:00","closed_at":"2026-01-04T22:25:20.655863-08:00","close_reason":"V2 ADHD prompt feature complete - 4 subtasks implemented"}
{"id":"voice-memory-ogp","title":"[P2-ARCH] No cache invalidation strategy for real-time app","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T11:30:39.273098-08:00","updated_at":"2026-01-01T20:15:44.767408-08:00","closed_at":"2026-01-01T20:15:44.767408-08:00","close_reason":"Implemented CacheInvalidationManager with realtime integration, useCacheInvalidation hook, and MutationInvalidators"}
{"id":"voice-memory-sm0","title":"Add time/energy display to EnhancedTaskList","description":"Update app/components/EnhancedTaskList.tsx to show estimatedMinutes and energy level on tasks. Basic display only, no filtering for MVP. ~40 LOC.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T21:59:55.051126-08:00","created_by":"andykaufman","updated_at":"2026-01-04T22:24:30.648266-08:00","closed_at":"2026-01-04T22:24:30.648266-08:00","close_reason":"Implemented by parallel subagents","dependencies":[{"issue_id":"voice-memory-sm0","depends_on_id":"voice-memory-u9p","type":"blocks","created_at":"2026-01-04T22:00:52.619688-08:00","created_by":"andykaufman"}]}
{"id":"voice-memory-u5g","title":"[P1-DATA] Race condition in pin order calculation - concurrent pins get duplicate order","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-01T11:30:24.699427-08:00","updated_at":"2026-01-01T15:55:03.501174-08:00","closed_at":"2026-01-01T15:55:03.501174-08:00","close_reason":"Fixed race condition by creating atomic pin_task_atomic RPC function that uses SELECT FOR UPDATE to lock user's pinned tasks during order calculation. Updated TaskStateService.pinTask() to use the atomic RPC instead of sequential SELECT + UPDATE."}
{"id":"voice-memory-u9p","title":"Extend NoteAnalysis types for V2","description":"Update lib/types.ts to extend NoteAnalysis with: theOneThing.why, task.estimatedMinutes, task.energy, task.context, openLoops array, noteType. All new fields optional for backwards compat. ~20 LOC.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T21:59:32.466391-08:00","created_by":"andykaufman","updated_at":"2026-01-04T22:16:42.343276-08:00","closed_at":"2026-01-04T22:16:42.343276-08:00","close_reason":"Both tasks completed: migration file created at supabase/migrations/20260104_open_loops.sql and types extended in lib/types.ts with V2 ADHD fields"}
{"id":"voice-memory-ush","title":"Add permissive V2 validation to lib/validation.ts","description":"Extend Zod schema for V2 fields. Validation should be permissive - accept fuzzy GPT output, default missing fields. ~15 LOC.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-04T21:59:38.063579-08:00","created_by":"andykaufman","updated_at":"2026-01-04T22:24:30.646012-08:00","closed_at":"2026-01-04T22:24:30.646012-08:00","close_reason":"Implemented by parallel subagents","dependencies":[{"issue_id":"voice-memory-ush","depends_on_id":"voice-memory-u9p","type":"blocks","created_at":"2026-01-04T22:00:21.136547-08:00","created_by":"andykaufman"}]}
{"id":"voice-memory-w7z","title":"[P2-PERF] VirtualizedNoteList has virtualization disabled - 2500+ DOM nodes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-01T11:30:37.431286-08:00","updated_at":"2026-01-01T17:20:13.608379-08:00","closed_at":"2026-01-01T17:20:13.608379-08:00","close_reason":"Implemented IntersectionObserver-based virtualization and adaptive exponential backoff"}
{"id":"voice-memory-wdy","title":"[P1-PERF] Tasks API N+1 pattern - 4 sequential DB queries per request","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-01T11:30:23.745952-08:00","updated_at":"2026-01-01T15:50:37.828426-08:00","closed_at":"2026-01-01T15:50:37.828426-08:00","close_reason":"Fixed N+1 pattern by parallelizing getNotesByUser and getPinnedTasksByUser using Promise.all(). Reduced from 4 sequential queries to 3 (with 2 running in parallel). Also improved pin status lookup using Set for O(1) access."}
{"id":"voice-memory-wsx","title":"[P1-SEC] Admin email inconsistency allows privilege escalation via @voicememory.test domain","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-01T11:30:22.853875-08:00","updated_at":"2026-01-01T15:24:56.273902-08:00","closed_at":"2026-01-01T15:24:56.273902-08:00"}
{"id":"voice-memory-y6h","title":"[P1-SEC] Refresh token misuse in 12+ API routes - access token used as refresh token","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-01T11:30:22.360547-08:00","updated_at":"2026-01-01T15:17:42.120704-08:00","closed_at":"2026-01-01T15:17:42.120704-08:00"}
{"id":"voice-memory-zp9","title":"[P0-DATA] FK migration will fail - orphaned task_states records must be cleaned first","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-01T11:30:07.414998-08:00","updated_at":"2026-01-01T12:11:38.496797-08:00","closed_at":"2026-01-01T12:11:38.496797-08:00"}
